(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-31dfa813"],{"0c9c":function(e,t,r){},1:function(e,t){},"2dbc":function(e,t,r){"use strict";var n=r("b775"),a=r("4328"),i=r.n(a);function o(e){return Object(n["a"])({url:"api/salesRecordViewUser?"+i.a.stringify(e,{indices:!1}),method:"get"})}function s(e){return Object(n["a"])({url:"api/salesRecordViewUser",method:"post",data:e})}function c(e){return Object(n["a"])({url:"api/salesRecordViewUser/",method:"delete",data:e})}function u(e){return Object(n["a"])({url:"api/salesRecordViewUser",method:"put",data:e})}t["a"]={add:s,edit:u,del:c,list:o}},"4f59":function(e,t,r){"use strict";var n=function(){var e=this,t=e._self._c;return t("span",[t("el-button",{staticClass:"filter-item",attrs:{size:"mini",type:"success",icon:"el-icon-search"},on:{click:e.crud.toQuery}},[e._v("搜索")]),e._v(" "),e.crud.optShow.reset?t("el-button",{staticClass:"filter-item",attrs:{size:"mini",type:"warning",icon:"el-icon-refresh-left"},on:{click:function(t){return e.crud.resetQuery()}}},[e._v("重置")]):e._e()],1)},a=[],i=r("c6db"),o={mixins:[Object(i["a"])()],props:{itemClass:{type:String,required:!1,default:""}}},s=o,c=r("2877"),u=Object(c["a"])(s,n,a,!1,null,null,null);t["a"]=u.exports},"55b8":function(e,t,r){"use strict";var n=function(){var e=this,t=e._self._c;return t("el-pagination",{staticStyle:{"margin-top":"8px"},attrs:{"page-size":e.page.size,total:e.page.total,"current-page":e.page.page,layout:"total, prev, pager, next, sizes"},on:{"update:pageSize":function(t){return e.$set(e.page,"size",t)},"update:page-size":function(t){return e.$set(e.page,"size",t)},"update:currentPage":function(t){return e.$set(e.page,"page",t)},"update:current-page":function(t){return e.$set(e.page,"page",t)},"size-change":function(t){return e.crud.sizeChangeHandler(t)},"current-change":e.crud.pageChangeHandler}})},a=[],i=r("c6db"),o={mixins:[Object(i["e"])()]},s=o,c=r("2877"),u=Object(c["a"])(s,n,a,!1,null,null,null);t["a"]=u.exports},"63d5":function(e,t,r){"use strict";var n=r("b775");function a(e){return Object(n["a"])({url:"api/salesRecordView",method:"post",data:e})}function i(e){return Object(n["a"])({url:"api/salesRecordView/",method:"delete",data:e})}function o(e){return Object(n["a"])({url:"api/salesRecordView",method:"put",data:e})}t["a"]={add:a,edit:o,del:i}},"7e1e":function(e,t,r){"use strict";r.d(t,"b",(function(){return o})),r.d(t,"a",(function(){return s}));var n=r("b775"),a=r("4328"),i=r.n(a);function o(e,t){return Object(n["a"])({url:e+"?"+i.a.stringify(t,{indices:!1}),method:"get"})}function s(e,t){return Object(n["a"])({url:e+"?"+i.a.stringify(t,{indices:!1}),method:"get",responseType:"blob"})}},8414:function(e,t,r){"use strict";var n=function(){var e=this,t=e._self._c;return t("div",[t("el-button",{directives:[{name:"permission",rawName:"v-permission",value:e.permission.edit,expression:"permission.edit"}],attrs:{loading:2===e.crud.status.cu,disabled:e.disabledEdit,size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(t){return e.crud.toEdit(e.data)}}}),e._v(" "),t("el-popover",{directives:[{name:"permission",rawName:"v-permission",value:e.permission.del,expression:"permission.del"}],attrs:{placement:"top",width:"180",trigger:"manual"},on:{show:e.onPopoverShow,hide:e.onPopoverHide},model:{value:e.pop,callback:function(t){e.pop=t},expression:"pop"}},[t("p",[e._v(e._s(e.msg))]),e._v(" "),t("div",{staticStyle:{"text-align":"right",margin:"0"}},[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:e.doCancel}},[e._v("取消")]),e._v(" "),t("el-button",{attrs:{loading:2===e.crud.dataStatus[e.crud.getDataId(e.data)].delete,type:"primary",size:"mini"},on:{click:function(t){return e.crud.doDelete(e.data)}}},[e._v("确定")])],1),e._v(" "),t("el-button",{attrs:{slot:"reference",disabled:e.disabledDle,type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:e.toDelete},slot:"reference"})],1)],1)},a=[],i=r("bd86"),o=r("c6db"),s={mixins:[Object(o["a"])()],props:{data:{type:Object,required:!0},permission:{type:Object,required:!0},disabledEdit:{type:Boolean,default:!1},disabledDle:{type:Boolean,default:!1},msg:{type:String,default:"确定删除本条数据吗？"}},data:function(){return{pop:!1}},methods:Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])({doCancel:function(){this.pop=!1,this.crud.cancelDelete(this.data)},toDelete:function(){this.pop=!0}},o["b"].HOOK.afterDelete,(function(e,t){t===this.data&&(this.pop=!1)})),"onPopoverShow",(function(){var e=this;setTimeout((function(){document.addEventListener("click",e.handleDocumentClick)}),0)})),"onPopoverHide",(function(){document.removeEventListener("click",this.handleDocumentClick)})),"handleDocumentClick",(function(e){this.pop=!1}))},c=s,u=r("2877"),d=Object(u["a"])(c,n,a,!1,null,null,null);t["a"]=d.exports},"8de4":function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r("24e5"),a=r.n(n),i="MFwwDQYJKoZIhvcNAQEBBQADSwAwSAJBANL378k3RiZHWx5AfJqdH9xRNBmD9wGD\n2iRe41HdTNF8RUhNnHit5NpMNtGL0NPTSSpPjjI1kJfVorRvaQerUgkCAwEAAQ==";function o(e){var t=new a.a;return t.setPublicKey(i),t.encrypt(e)}},ab00:function(e,t,r){"use strict";var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"crud-opts"},[t("span",{staticClass:"crud-opts-left"},[e._t("left"),e._v(" "),e.crud.optShow.add?t("el-button",{directives:[{name:"permission",rawName:"v-permission",value:e.permission.add,expression:"permission.add"}],staticClass:"filter-item",attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:e.crud.toAdd}},[e._v("\n      新增\n    ")]):e._e(),e._v(" "),e.crud.optShow.edit?t("el-button",{directives:[{name:"permission",rawName:"v-permission",value:e.permission.edit,expression:"permission.edit"}],staticClass:"filter-item",attrs:{size:"mini",type:"success",icon:"el-icon-edit",disabled:1!==e.crud.selections.length},on:{click:function(t){return e.crud.toEdit(e.crud.selections[0])}}},[e._v("\n      修改\n    ")]):e._e(),e._v(" "),e.crud.optShow.del?t("el-button",{directives:[{name:"permission",rawName:"v-permission",value:e.permission.del,expression:"permission.del"}],staticClass:"filter-item",attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",size:"mini",loading:e.crud.delAllLoading,disabled:0===e.crud.selections.length},on:{click:function(t){return e.toDelete(e.crud.selections)}},slot:"reference"},[e._v("\n      删除\n    ")]):e._e(),e._v(" "),e.crud.optShow.download?t("el-button",{staticClass:"filter-item",attrs:{loading:e.crud.downloadLoading,disabled:!e.crud.data.length,size:"mini",type:"warning",icon:"el-icon-download"},on:{click:e.crud.doExport}},[e._v("导出")]):e._e(),e._v(" "),e._t("right")],2),e._v(" "),t("el-button-group",{staticClass:"crud-opts-right"},[t("el-button",{attrs:{size:"mini",plain:"",type:"info",icon:"el-icon-search"},on:{click:function(t){return e.toggleSearch()}}}),e._v(" "),t("el-button",{attrs:{size:"mini",icon:"el-icon-refresh"},on:{click:function(t){return e.crud.refresh()}}}),e._v(" "),t("el-popover",{attrs:{placement:"bottom-end",width:"150",trigger:"click"}},[t("el-button",{attrs:{slot:"reference",size:"mini",icon:"el-icon-s-grid"},slot:"reference"},[t("i",{staticClass:"fa fa-caret-down",attrs:{"aria-hidden":"true"}})]),e._v(" "),t("el-checkbox",{attrs:{indeterminate:e.allColumnsSelectedIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.allColumnsSelected,callback:function(t){e.allColumnsSelected=t},expression:"allColumnsSelected"}},[e._v("\n        全选\n      ")]),e._v(" "),e._l(e.tableColumns,(function(r){return t("el-checkbox",{key:r.property,on:{change:function(t){return e.handleCheckedTableColumnsChange(r)}},model:{value:r.visible,callback:function(t){e.$set(r,"visible",t)},expression:"item.visible"}},[e._v("\n        "+e._s(r.label)+"\n      ")])}))],2)],1)],1)},a=[],i=(r("7514"),r("ac6a"),r("c6db"));function o(e,t){var r=Object.assign([],t),n=-1;return e.forEach((function(e){var t=r.indexOf(e);-1===t?(n+=1,r.splice(n,0,e)):n=t})),r}var s={mixins:[Object(i["a"])()],props:{permission:{type:Object,default:function(){return{}}},hiddenColumns:{type:Array,default:function(){return[]}},ignoreColumns:{type:Array,default:function(){return[]}}},data:function(){return{tableColumns:[],allColumnsSelected:!0,allColumnsSelectedIndeterminate:!1,tableUnwatcher:null,ignoreNextTableColumnsChange:!1}},watch:{"crud.props.table":function(){var e=this;this.updateTableColumns(),this.tableColumns.forEach((function(t){-1!==e.hiddenColumns.indexOf(t.property)&&(t.visible=!1,e.updateColumnVisible(t))}))},"crud.props.table.store.states.columns":function(){this.updateTableColumns()}},created:function(){this.crud.updateProp("searchToggle",!0)},methods:{updateTableColumns:function(){var e=this,t=this.crud.getTable();if(t){var r=null,n=function(t){return t&&"default"===t.type&&t.property&&-1===e.ignoreColumns.indexOf(t.property)},a=t.columns.filter(n);if(this.ignoreNextTableColumnsChange)this.ignoreNextTableColumnsChange=!1;else{this.ignoreNextTableColumnsChange=!1;var i=[],s=t.$children.map((function(e){return e.columnConfig})).filter(n);r=o(s,a),r.forEach((function(e){var t={property:e.property,label:e.label,visible:-1!==a.indexOf(e)};i.push(t)})),this.tableColumns=i}}else this.tableColumns=[]},toDelete:function(e){var t=this;this.$confirm("确认删除选中的".concat(e.length,"条数据?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.crud.delAllLoading=!0,t.crud.doDelete(e)})).catch((function(){}))},handleCheckAllChange:function(e){var t=this;!1!==e?(this.tableColumns.forEach((function(e){e.visible||(e.visible=!0,t.updateColumnVisible(e))})),this.allColumnsSelected=e,this.allColumnsSelectedIndeterminate=!1):this.allColumnsSelected=!0},handleCheckedTableColumnsChange:function(e){var t=0,r=0;if(this.tableColumns.forEach((function(e){++t,r+=e.visible?1:0})),0===r)return this.crud.notify("请至少选择一列",i["b"].NOTIFICATION_TYPE.WARNING),void this.$nextTick((function(){e.visible=!0}));this.allColumnsSelected=r===t,this.allColumnsSelectedIndeterminate=r!==t&&0!==r,this.updateColumnVisible(e)},updateColumnVisible:function(e){var t=this.crud.props.table,r=t.$children.find((function(t){return t.prop===e.property})),n=r.columnConfig;if(e.visible){var a=this.tableColumns.indexOf(e);r.owner.store.commit("insertColumn",n,a+1,null)}else r.owner.store.commit("removeColumn",n,null);this.ignoreNextTableColumnsChange=!0},toggleSearch:function(){this.crud.props.searchToggle=!this.crud.props.searchToggle}}},c=s,u=(r("f77d"),r("2877")),d=Object(u["a"])(c,n,a,!1,null,null,null);t["a"]=d.exports},c0c7:function(e,t,r){"use strict";r.d(t,"b",(function(){return l})),r.d(t,"d",(function(){return f})),r.d(t,"c",(function(){return p}));var n=r("b775"),a=r("8de4"),i=r("4328"),o=r.n(i);function s(e){return Object(n["a"])({url:"api/users?"+o.a.stringify(e,{indices:!1}),method:"get"})}function c(e){return Object(n["a"])({url:"api/users",method:"post",data:e})}function u(e){return Object(n["a"])({url:"api/users",method:"delete",data:e})}function d(e){return Object(n["a"])({url:"api/users",method:"put",data:e})}function l(e){return Object(n["a"])({url:"api/users/center",method:"put",data:e})}function f(e){var t={oldPass:Object(a["a"])(e.oldPass),newPass:Object(a["a"])(e.newPass)};return Object(n["a"])({url:"api/users/updatePass/",method:"post",data:t})}function p(e){var t={password:Object(a["a"])(e.pass),email:e.email};return Object(n["a"])({url:"api/users/updateEmail/"+e.code,method:"post",data:t})}t["a"]={add:c,edit:d,del:u,list:s}},c6db:function(e,t,r){"use strict";r.d(t,"f",(function(){return m})),r.d(t,"d",(function(){return h})),r.d(t,"c",(function(){return b})),r.d(t,"e",(function(){return g})),r.d(t,"a",(function(){return O}));r("8e6e"),r("5df3"),r("4f7f"),r("0d6d"),r("7514");var n=r("7618"),a=(r("55dd"),r("28a5"),r("456d"),r("ac6a"),r("bd86")),i=r("7e1e"),o=r("ed08"),s=r("2b0e");function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){Object(a["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e){var t={tag:"default",idField:"id",title:"",url:"",data:[],selections:[],query:{},params:{},form:{},defaultForm:function(){},sort:["id,desc"],time:50,crudMethod:{add:function(e){},del:function(e){},edit:function(e){},get:function(e){}},optShow:{add:!0,edit:!0,del:!0,download:!0,reset:!0},props:{},queryOnPresenterCreated:!0,debug:!1};e=f(t,e);var r=u(u({},e),{},{dataStatus:{},status:{add:d.STATUS.NORMAL,edit:d.STATUS.NORMAL,get cu(){if(this.add===d.STATUS.NORMAL&&this.edit===d.STATUS.NORMAL)return d.STATUS.NORMAL;if(this.add===d.STATUS.PREPARED||this.edit===d.STATUS.PREPARED)return d.STATUS.PREPARED;if(this.add===d.STATUS.PROCESSING||this.edit===d.STATUS.PROCESSING)return d.STATUS.PROCESSING;throw new Error("wrong crud's cu status")},get title(){return this.add>d.STATUS.NORMAL?"新增".concat(c.title):this.edit>d.STATUS.NORMAL?"编辑".concat(c.title):c.title}},msg:{submit:"提交成功",add:"新增成功",edit:"编辑成功",del:"删除成功"},page:{page:0,size:10,total:0},loading:!1,downloadLoading:!1,delAllLoading:!1}),a={submitSuccessNotify:function(){c.notify(c.msg.submit,d.NOTIFICATION_TYPE.SUCCESS)},addSuccessNotify:function(){c.notify(c.msg.add,d.NOTIFICATION_TYPE.SUCCESS)},editSuccessNotify:function(){c.notify(c.msg.edit,d.NOTIFICATION_TYPE.SUCCESS)},delSuccessNotify:function(){c.notify(c.msg.del,d.NOTIFICATION_TYPE.SUCCESS)},toQuery:function(){c.page.page=1,c.refresh()},refresh:function(){if(l(c,d.HOOK.beforeRefresh))return new Promise((function(e,t){c.loading=!0,Object(i["b"])(c.url,c.getQueryParams()).then((function(t){var r=c.getTable();r&&r.lazy&&(r.store.states.treeData={},r.store.states.lazyTreeNodeMap={}),c.page.total=t.totalElements,c.data=t.content,c.resetDataStatus(),setTimeout((function(){c.loading=!1,l(c,d.HOOK.afterRefresh)}),c.time),e(t)})).catch((function(e){c.loading=!1,t(e)}))}))},toAdd:function(){c.resetForm(),l(c,d.HOOK.beforeToAdd,c.form)&&l(c,d.HOOK.beforeToCU,c.form)&&(c.status.add=d.STATUS.PREPARED,l(c,d.HOOK.afterToAdd,c.form),l(c,d.HOOK.afterToCU,c.form))},toEdit:function(e){c.resetForm(JSON.parse(JSON.stringify(e))),l(c,d.HOOK.beforeToEdit,c.form)&&l(c,d.HOOK.beforeToCU,c.form)&&(c.status.edit=d.STATUS.PREPARED,c.getDataStatus(c.getDataId(e)).edit=d.STATUS.PREPARED,l(c,d.HOOK.afterToEdit,c.form),l(c,d.HOOK.afterToCU,c.form))},toDelete:function(e){c.getDataStatus(c.getDataId(e)).delete=d.STATUS.PREPARED},cancelDelete:function(e){l(c,d.HOOK.beforeDeleteCancel,e)&&(c.getDataStatus(c.getDataId(e)).delete=d.STATUS.NORMAL,l(c,d.HOOK.afterDeleteCancel,e))},cancelCU:function(){var e=c.status.add,t=c.status.edit;if(e===d.STATUS.PREPARED){if(!l(c,d.HOOK.beforeAddCancel,c.form))return;c.status.add=d.STATUS.NORMAL}if(t===d.STATUS.PREPARED){if(!l(c,d.HOOK.beforeEditCancel,c.form))return;c.status.edit=d.STATUS.NORMAL,c.getDataStatus(c.getDataId(c.form)).edit=d.STATUS.NORMAL}c.resetForm(),e===d.STATUS.PREPARED&&l(c,d.HOOK.afterAddCancel,c.form),t===d.STATUS.PREPARED&&l(c,d.HOOK.afterEditCancel,c.form),c.findVM("form").$refs["form"]&&c.findVM("form").$refs["form"].clearValidate()},submitCU:function(){l(c,d.HOOK.beforeValidateCU)&&c.findVM("form").$refs["form"].validate((function(e){e&&l(c,d.HOOK.afterValidateCU)&&(c.status.add===d.STATUS.PREPARED?c.doAdd():c.status.edit===d.STATUS.PREPARED&&c.doEdit())}))},doAdd:function(){l(c,d.HOOK.beforeSubmit)&&(c.status.add=d.STATUS.PROCESSING,c.crudMethod.add(c.form).then((function(){c.status.add=d.STATUS.NORMAL,c.resetForm(),c.addSuccessNotify(),l(c,d.HOOK.afterSubmit),c.toQuery()})).catch((function(){c.status.add=d.STATUS.PREPARED,l(c,d.HOOK.afterAddError)})))},doEdit:function(){l(c,d.HOOK.beforeSubmit)&&(c.status.edit=d.STATUS.PROCESSING,c.crudMethod.edit(c.form).then((function(){c.status.edit=d.STATUS.NORMAL,c.getDataStatus(c.getDataId(c.form)).edit=d.STATUS.NORMAL,c.editSuccessNotify(),c.resetForm(),l(c,d.HOOK.afterSubmit),c.refresh()})).catch((function(){c.status.edit=d.STATUS.PREPARED,l(c,d.HOOK.afterEditError)})))},doDelete:function(e){var t,r=this,n=!1,a=[];if(e instanceof Array?(n=!0,e.forEach((function(e){a.push(r.getDataId(e))}))):(a.push(this.getDataId(e)),t=c.getDataStatus(this.getDataId(e))),l(c,d.HOOK.beforeDelete,e))return n||(t.delete=d.STATUS.PROCESSING),c.crudMethod.del(a).then((function(){n?c.delAllLoading=!1:t.delete=d.STATUS.PREPARED,c.dleChangePage(1),c.delSuccessNotify(),l(c,d.HOOK.afterDelete,e),c.refresh()})).catch((function(){n?c.delAllLoading=!1:t.delete=d.STATUS.PREPARED}))},doExport:function(){c.downloadLoading=!0,Object(i["a"])(c.url+"/download",c.getQueryParams()).then((function(e){Object(o["c"])(e,c.title+"数据","xlsx"),c.downloadLoading=!1})).catch((function(){c.downloadLoading=!1}))},getQueryParams:function(){0!==Object.keys(c.query).length&&Object.keys(c.query).forEach((function(e){null!==c.query[e]&&""!==c.query[e]||(c.query[e]=void 0)})),0!==Object.keys(c.params).length&&Object.keys(c.params).forEach((function(e){null!==c.params[e]&&""!==c.params[e]||(c.params[e]=void 0)}));var e=window.location.href.split("/"),t=e[e.length-1];return t&&0===t.indexOf("dynamic")&&(c.query=u(u({},c.query),{},{tableName:t}),c.params=u(u({},c.params),{},{tableName:t})),u(u({page:c.page.page-1,size:c.page.size,sort:c.sort},c.query),c.params)},pageChangeHandler:function(e){c.page.page=e,c.refresh()},sizeChangeHandler:function(e){c.page.size=e,c.page.page=1,c.refresh()},dleChangePage:function(e){c.data.length===e&&1!==c.page.page&&(c.page.page-=1)},selectionChangeHandler:function(e){c.selections=e},resetQuery:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=JSON.parse(JSON.stringify(c.defaultQuery)),r=c.query;Object.keys(r).forEach((function(e){r[e]=t[e]})),this.params={},e&&c.toQuery()},resetForm:function(e){var t=e||("object"===Object(n["a"])(c.defaultForm)?JSON.parse(JSON.stringify(c.defaultForm)):c.defaultForm.apply(c.findVM("form"))),r=c.form;for(var a in t)r.hasOwnProperty(a)?r[a]=t[a]:s["default"].set(r,a,t[a]);c.findVM("form").$refs["form"]&&c.findVM("form").$refs["form"].clearValidate()},resetDataStatus:function(){var e={};function t(r){r.forEach((function(r){e[c.getDataId(r)]={delete:0,edit:0},r.children&&t(r.children)}))}t(c.data),c.dataStatus=e},getDataStatus:function(e){return c.dataStatus[e]},selectAllChange:function(e){e&&e.length===c.data.length?e.forEach((function(t){c.selectChange(e,t)})):c.getTable().clearSelection()},selectChange:function(e,t){e.find((function(e){return c.getDataId(e)===c.getDataId(t)}))?t.children&&t.children.forEach((function(t){c.getTable().toggleRowSelection(t,!0),e.push(t),t.children&&c.selectChange(e,t)})):c.toggleRowSelection(e,t)},toggleRowSelection:function(e,t){t.children&&t.children.forEach((function(t){c.getTable().toggleRowSelection(t,!1),t.children&&c.toggleRowSelection(e,t)}))},findVM:function(e){return c.vms.find((function(t){return t&&t.type===e})).vm},notify:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d.NOTIFICATION_TYPE.INFO;c.vms[0].vm.$notify({title:e,type:t,duration:2500})},updateProp:function(e,t){s["default"].set(c.props,e,t)},getDataId:function(e){return e[this.idField]},getTable:function(){return this.findVM("presenter").$refs.table},attchTable:function(){var e=this.getTable();this.updateProp("table",e);var t=this;e.$on("expand-change",(function(r,n){if(n){var a=e.store.states.lazyTreeNodeMap;r.children=a[c.getDataId(r)],r.children&&r.children.forEach((function(e){var r=c.getDataId(e);void 0===t.dataStatus[r]&&(t.dataStatus[r]={delete:0,edit:0})}))}}))}},c=Object.assign({},r);return s["default"].observable(c),Object.assign(c,a),Object.assign(c,{defaultQuery:JSON.parse(JSON.stringify(r.query)),vms:Array(4),registerVM:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,n={type:e,vm:t};r<0?this.vms.push(n):r<4?this.vms[r]=n:(this.vms.length=Math.max(this.vms.length,r),this.vms.splice(r,1,n))},unregisterVM:function(e,t){for(var r=this.vms.length-1;r>=0;r--)if(void 0!==this.vms[r]&&this.vms[r].type===e&&this.vms[r].vm===t){r<4?this.vms[r]=void 0:this.vms.splice(r,1);break}}}),Object.freeze(c),c}function l(e,t){e.debug;for(var r=e.tag?t+"$"+e.tag:null,n=!0,a=[e],i=2;i<arguments.length;++i)a.push(arguments[i]);var o=new Set;return e.vms.forEach((function(e){return e&&o.add(e.vm)})),o.forEach((function(e){e[t]&&(n=!1!==e[t].apply(e,a)&&n),r&&e[r]&&(n=!1!==e[r].apply(e,a)&&n)})),n}function f(e,t){var r=u({},e);for(var n in e)t.hasOwnProperty(n)&&(r[n]=t[n]);return r}function p(e,t){if(t=t||e.$attrs["crud-tag"]||"default",e.$crud){var r=e.$crud[t];if(r)return r}return e.$parent?p(e.$parent,t):void 0}function m(e){return{data:function(){return{crud:this.crud}},beforeCreate:function(){var t=this;this.$crud=this.$crud||{};var r=this.$options.cruds instanceof Function?this.$options.cruds():e;r instanceof Array||(r=[r]),r.forEach((function(e){t.$crud[e.tag],t.$crud[e.tag]=e,e.registerVM("presenter",t,0)})),this.crud=this.$crud["defalut"]||r[0]},methods:{parseTime:o["d"]},created:function(){for(var e in this.$crud)this.$crud[e].queryOnPresenterCreated&&this.$crud[e].toQuery()},destroyed:function(){for(var e in this.$crud)this.$crud[e].unregisterVM("presenter",this)},mounted:function(){void 0!==this.$refs.table&&this.crud.attchTable()}}}function h(){return{data:function(){return{crud:this.crud,query:this.crud.query}},beforeCreate:function(){this.crud=p(this),this.crud.registerVM("header",this,1)},destroyed:function(){this.crud.unregisterVM("header",this)}}}function g(){return{data:function(){return{crud:this.crud,page:this.crud.page}},beforeCreate:function(){this.crud=p(this),this.crud.registerVM("pagination",this,2)},destroyed:function(){this.crud.unregisterVM("pagination",this)}}}function b(e){return{data:function(){return{crud:this.crud,form:this.crud.form}},beforeCreate:function(){this.crud=p(this),this.crud.registerVM("form",this,3)},created:function(){this.crud.defaultForm=e,this.crud.resetForm()},destroyed:function(){this.crud.unregisterVM("form",this)}}}function O(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={type:void 0};return e=f(t,e),{data:function(){return{crud:this.crud}},beforeCreate:function(){this.crud=p(this),this.crud.registerVM(e.type,this)},destroyed:function(){this.crud.unregisterVM(e.type,this)}}}d.HOOK={beforeRefresh:"beforeCrudRefresh",afterRefresh:"afterCrudRefresh",beforeDelete:"beforeCrudDelete",afterDelete:"afterCrudDelete",beforeDeleteCancel:"beforeCrudDeleteCancel",afterDeleteCancel:"afterCrudDeleteCancel",beforeToAdd:"beforeCrudToAdd",afterToAdd:"afterCrudToAdd",beforeToEdit:"beforeCrudToEdit",afterToEdit:"afterCrudToEdit",beforeToCU:"beforeCrudToCU",afterToCU:"afterCrudToCU",beforeValidateCU:"beforeCrudValidateCU",afterValidateCU:"afterCrudValidateCU",beforeAddCancel:"beforeCrudAddCancel",afterAddCancel:"afterCrudAddCancel",beforeEditCancel:"beforeCrudEditCancel",afterEditCancel:"afterCrudEditCancel",beforeSubmit:"beforeCrudSubmitCU",afterSubmit:"afterCrudSubmitCU",afterAddError:"afterCrudAddError",afterEditError:"afterCrudEditError"},d.STATUS={NORMAL:0,PREPARED:1,PROCESSING:2},d.NOTIFICATION_TYPE={SUCCESS:"success",WARNING:"warning",INFO:"info",ERROR:"error"},t["b"]=d},dd0a:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("div",{staticClass:"head-container"},[t("el-row",{attrs:{gutter:15}},[t("el-col",{staticStyle:{"margin-bottom":"10px"},attrs:{xs:24,sm:24,md:24,lg:8,xl:8}},[t("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[t("el-form",{ref:"payform",attrs:{model:e.payform,rules:e.rules,size:"small","label-width":"80px"}},[t("el-row",[t("el-col",{attrs:{xs:24,sm:24,md:24,lg:20,xl:16}},[t("el-form-item",{attrs:{label:"金额","label-width":"100px",prop:"payAmount"}},[t("el-input-number",{staticStyle:{width:"100%"},attrs:{min:.2,max:5e4,step:500,label:"请输入支付金额"},model:{value:e.payform.payAmount,callback:function(t){e.$set(e.payform,"payAmount",t)},expression:"payform.payAmount"}})],1)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"支付宝姓名","label-width":"100px",prop:"transferName"}},[t("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入支付宝姓名"},model:{value:e.payform.transferName,callback:function(t){e.$set(e.payform,"transferName",t)},expression:"payform.transferName"}})],1)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"支付宝账号","label-width":"100px",prop:"transferAccount"}},[t("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入支付宝账号"},model:{value:e.payform.transferAccount,callback:function(t){e.$set(e.payform,"transferAccount",t)},expression:"payform.transferAccount"}})],1)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:24}},[t("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",loading:e.commitLoading},on:{click:e.createOrder}},[e._v("提交")])],1)],1),e._v(" "),null!==e.payurl&&void 0!==e.payurl&&""!==e.payurl.trim()?t("div",[t("el-row",[t("vue-qr",{attrs:{text:null===e.payurl||void 0===e.payurl||""===e.payurl.trim()?"":e.payurl.trim(),size:200}}),e._v("\n                  请使用支付宝支付\n                ")],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:24}},[t("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",disabled:null===e.payurl||void 0===e.payurl||""===e.payurl.trim()},on:{click:e.openPayUrl}},[e._v("\n                      支付\n                    ")])],1)],1)],1):e._e()],1)],1)],1)],1)],1)])},a=[],i=(r("8e6e"),r("ac6a"),r("456d"),r("bd86")),o=(r("c0c7"),r("b775"));function s(e){return Object(o["a"])({url:"api/paytransfer/do",method:"post",data:e})}var c={payTransfer:s},u=r("63d5"),d=r("2dbc"),l=r("c6db"),f=r("4f59"),p=r("ab00"),m=r("8414"),h=r("55b8"),g=r("658f"),b=r.n(g);function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){Object(i["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var y={name:"SalesRecordView",components:{pagination:h["a"],crudOperation:p["a"],rrOperation:f["a"],udOperation:m["a"],vueQr:b.a},mixins:[Object(l["f"])(),Object(l["d"])()],cruds:function(){return Object(l["b"])({title:"表格记录视图",url:"api/salesRecordView",idField:"id",sort:"id,desc",crudMethod:v({},u["a"])})},data:function(){return{payform:{payAmount:null,transferName:null,transferAccount:null},payurl:null,commitLoading:!1,rules:{payAmount:[{required:!0,message:"支付金额必填",trigger:"blur"}],transferName:[{required:!0,message:"支付宝姓名必填",trigger:"blur"}],transferAccount:[{required:!0,message:"支付宝账号必填",trigger:"blur"}]}}},created:function(){},methods:Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])({},l["b"].HOOK.beforeRefresh,(function(){return!1})),"openPayUrl",(function(){window.open(this.payurl,"_blank")})),"createOrder",(function(){var e=this.payform,t=this;t.payurl="",t.commitLoading=!0,this.$refs.payform.validate((function(r){if(!r)return!1;c.payTransfer(e).then((function(e){t.commitLoading=!1,e?e.payData?t.payurl=e.payData:e.message&&t.$notify({title:"",message:e.message,type:"warning",dangerouslyUseHTMLString:!0,duration:5500}):t.$notify({title:"",message:"请刷新后重试",type:"warning",dangerouslyUseHTMLString:!0,duration:5500})}))}))})),"handleCurrentChange",(function(e){if(e){var t=this;d["a"].list({page:0,size:1e4,sort:"id,desc",salesRecordViewId:t.currViewId}).then((function(e){for(var t=[],r=0;r<e.content.length;r++)t.push(e.content[r].userId)})).catch((function(e){}))}})),"addOrUpdateViewUser",(function(){var e=this;this.$refs["viewUserForm"].validate((function(t){t&&d["a"].add({salesRecordViewId:e.viewUserForm.currViewId,userId:e.viewUserForm.uid}).then((function(t){e.$notify({title:"",message:"操作成功",type:"success",dangerouslyUseHTMLString:!0,duration:5500})})).catch((function(e){}))}))}))},S=y,C=r("2877"),T=Object(C["a"])(S,n,a,!1,null,"01650502",null);t["default"]=T.exports},f77d:function(e,t,r){"use strict";r("0c9c")}}]);